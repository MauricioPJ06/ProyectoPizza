<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=user_attributes" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/Menu/Menu.css">
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
        crossorigin="anonymous"></script>

    <header>
        <div class="row justify-content-between">
            <div class="col-12 col-md-4">
                <a href="Menu.html">
                    <img src="../Imagenes/nonnaLogo.png" class="img-fluid rounded-circle">
                </a>
            </div>
            <div class="col-12 col-md-4 d-flex align-items-center">
                <a href="Menu.html">Menú</a>
                <a href="Promociones.html">Promociones</a>
                <a href="../html/Compra/MetodoCompra.html">Compra</a>
                <a href="Usuario.html">
                    <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" class="icono">
                        <path d="M541.33-693.33V-760H880v66.67H541.33Zm0 160V-600H880v66.67H541.33Zm0 160V-440H880v66.67H541.33ZM320-402q-50.67 0-84.67-34t-34-84.67q0-50.66 34-84.66t84.67-34q50.67 0 84.67 34t34 84.66q0 50.67-34 84.67T320-402ZM80-160v-69.33q0-19.58 9.33-37.29 9.34-17.71 25.34-26.05 45-30.33 97.5-45.16 52.5-14.84 107.83-14.84t107.5 15.84q52.17 15.83 97.83 44.16 15.34 10.34 25 27Q560-249 560-229.33V-160H80Zm65.33-74v7.33h349.34V-234Q457-258 410-272t-90-14q-43 0-90.33 14-47.34 14-84.34 38ZM320-468.67q23 0 37.5-14.5t14.5-37.5q0-23-14.5-37.5t-37.5-14.5q-23 0-37.5 14.5t-14.5 37.5q0 23 14.5 37.5t37.5 14.5Zm0-52Zm0 294Z"/>
                    </svg>
                </a>
                <svg xmlns="http://www.w3.org/2000/svg" height="27px" viewBox="0 -960 960 960" width="27px"
                    fill="#000000" class="icono" id="iconoCarrito" onclick="abrirCarrito()">
                    <path
                        d="M440-600v-120H320v-80h120v-120h80v120h120v80H520v120h-80ZM280-80q-33 0-56.5-23.5T200-160q0-33 23.5-56.5T280-240q33 0 56.5 23.5T360-160q0 33-23.5 56.5T280-80Zm400 0q-33 0-56.5-23.5T600-160q0-33 23.5-56.5T680-240q33 0 56.5 23.5T760-160q0 33-23.5 56.5T680-80ZM40-800v-80h131l170 360h280l156-280h91L692-482q-11 20-29.5 31T622-440H324l-44 80h480v80H280q-45 0-68.5-39t-1.5-79l54-98-144-304H40Z" />
                </svg>

            </div>
        </div>
    </header>
                                    <!-- -->
    <!-- Sidebar carrito -->
    <div id="sidebarCarrito" class="offcanvas offcanvas-end" tabindex="-1" aria-labelledby="sidebarCarritoLabel">
        <div class="offcanvas-header"> <!--El header del panel lateral(offcanvas)-->
            <h2 class="offcanvas-title" id="sidebarCarritoLabel">Tu Carrito</h2>
           <!-- El boton que cierra el panel -->
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
        </div>
        <div class="offcanvas-body">
            <!-- CUANDO EL CARRITO TIENE PRODUCTOS -->
            <div id="contenidoProductos" class="contenido-productos d-none"> <!--Seccion ocultada por defecto con d-none se activa con js con su id -->
                <div id="lista-Productos" class="mb-3"></div> <!--Aqui se mostraran los productos dinamicamnte -->
                <div class="card bg-white border-0 shadow-none">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <span>Total:</span>
                            <strong id="totalCarrito">S/0.00</strong>
                        </div>
                        <div class="d-grid gap-2">
                            <button class="btn btn-outline-danger" onclick="vaciarCarrito()">Vaciar carrito</button>
                            <button class="btn btn-outline-secondary" data-bs-dismiss="offcanvas">Seguir comprando</button>
                            <button class="btn btn-success" onclick="realizarPedido()">Realizar pedido</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- CUANDO EL CARRITO ESTÁ VACÍO -->
            <div id="carritoVacio" class="carrito-vacio">
                <p class="text-center">Tu carrito de compras está vacío</p>
                <div class="d-grid">
                    <button class="btn btn-outline-secondary" data-bs-dismiss="offcanvas">Seguir comprando</button>
                </div>
            </div>
        </div>
    </div>
    
    <main>
        <section class="container my-5">
        <h1 class="text-center mb-4">Nuestro Menú</h1>
        <div class="row row-cols-1 row-cols-md-3 g-4"> <!-- G-4 es espaciado entre las columnas -->
            <!-- Pizza 1 -->
            <div class="col">
                <div class="card h-100"> 
                    <img src="../Imagenes/Pizza Margarita.jpg" class="card-img-top pizza-circular" alt="Pizza Margarita">
                    <div class="card-body">
                        <h5 class="card-title">Pizza Margarita</h5>
                        <p class="card-text">Mozzarella, tomate, albahaca fresca.</p>
                        <ul class="list-unstyled">
                            <li><strong>Mediana:</strong> S/25</li>
                            <li><strong>Familiar:</strong> S/35</li>
                        </ul>
                        <p class="card-text"><strong>Extras:</strong> Salsa BBQ + S/5, Champiñones + S/4</p>
                    </div>
                    <div class="card-footer text-center">
                        <button class="btn btn-primary" onclick="agregarCarrito(this)">Agregar</button>
                    </div>
                </div>
            </div>

            <!-- Pizza 2 -->
            <div class="col">
                <div class="card h-100">
                    <img src="../Imagenes/Pizza Peperoni.png" class="card-img-top pizza-circular" alt="Pizza Pepperoni">
                    <div class="card-body">
                        <h5 class="card-title">Pizza Pepperoni</h5>
                        <p class="card-text">Mozzarella, pepperoni, salsa especial.</p>
                        <ul class="list-unstyled">
                            <li><strong>Personal:</strong> S/18</li>
                            <li><strong>Mediana:</strong> S/30</li>
                            <li><strong>Familiar:</strong> S/40</li>
                        </ul>
                        <p class="card-text"><strong>Extras:</strong> Aceitunas + S/3, Jalapeños + S/4</p>
                    </div>
                    <div class="card-footer text-center">
                        <button class="btn btn-primary" onclick="agregarCarrito(this)">Agregar</button>
                    </div>
                </div>
            </div>

            <!-- Pizza 3 -->
            <div class="col">
                <div class="card h-100">
                    <img src="../Imagenes/Pizza Hawaiana.jpg" class="card-img-top pizza-circular" alt="Pizza Hawaiana">
                    <div class="card-body">
                        <h5 class="card-title">Pizza Hawaiana</h5>
                        <p class="card-text">Jamón, piña, mozzarella, salsa de tomate.</p>
                        <ul class="list-unstyled">
                            <li><strong>Personal:</strong> S/17</li>
                            <li><strong>Mediana:</strong> S/28</li>
                            <li><strong>Familiar:</strong> S/38</li>
                        </ul>
                        <p class="card-text"><strong>Extras:</strong> Tocino + S/5, Extra Queso + S/4</p>
                    </div>
                    <div class="card-footer text-center">
                        <button class="btn btn-primary" onclick="agregarCarrito(this)">Agregar</button>
                    </div>
                </div>
            </div>

            <!-- Pizza 4 -->
            <div class="col">
                <div class="card h-100">
                    <img src="../Imagenes/Pizza Cuatro Quesos.png" class="card-img-top pizza-circular" alt="Pizza Cuatro Quesos">
                    <div class="card-body">
                        <h5 class="card-title">Pizza Cuatro Quesos</h5>
                        <p class="card-text">Mozzarella, cheddar, parmesano, azul.</p>
                        <ul class="list-unstyled">
                            <li><strong>Personal:</strong> S/20</li>
                            <li><strong>Mediana:</strong> S/32</li>
                            <li><strong>Familiar:</strong> S/45</li>
                        </ul>
                        <p class="card-text"><strong>Extras:</strong> Champiñones + S/4, Aceitunas + S/3</p>
                    </div>
                    <div class="card-footer text-center">
                        <button class="btn btn-primary" onclick="agregarCarrito(this)">Agregar</button>
                    </div>
                </div>
            </div>

            <!-- Pizza 5 -->
            <div class="col">
                <div class="card h-100">
                    <img src="../Imagenes/Pizza Vegetariana.png" class="card-img-top pizza-circular" alt="Pizza Vegetariana">
                    <div class="card-body">
                        <h5 class="card-title">Pizza Vegetariana</h5>
                        <p class="card-text">Tomate, pimiento, champiñones, aceitunas, cebolla.</p>
                        <ul class="list-unstyled">
                            <li><strong>Personal:</strong> S/16</li>
                            <li><strong>Mediana:</strong> S/27</li>
                            <li><strong>Familiar:</strong> S/37</li>
                        </ul>
                        <p class="card-text"><strong>Extras:</strong> Extra Queso + S/4, Jalapeños + S/4</p>
                    </div>
                    <div class="card-footer text-center">
                        <button class="btn btn-primary" onclick="agregarCarrito(this)">Agregar</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    </main>

    <script> 
        function agregarCarrito(boton) {
            const card = boton.closest(".card");
            const nombre = card.querySelector(".card-title").textContent;
            const imagen = card.querySelector("img").src;

            const precioTexto = card.querySelector("ul li strong").nextSibling.textContent.trim(); /*Busca el elemento del lado inmediato del Strong*/
            
            const precio = parseFloat(precioTexto.replace(/[^\d.]/g, "")); /*Busca todo lo que no sea un numero (/d) y lo reemplaza con un espacio vacio. Obteniendo solo el numero*/
            
            const cantidadSeleccionada = 1;

            if (isNaN(precio)) {
                console.error("No se pudo obtener el precio de", nombre);
                return;
            }

            agregarProducto(nombre, precio, imagen, cantidadSeleccionada);
            abrirCarrito();
        }
    </script>

    <script src="../js/Carrito/carrito.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
        crossorigin="anonymous"></script>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <footer>
        <div class="row">
            <div class="col-12 col-md-4">
                <div class="container-fluid text-center">
                    <img src="../Imagenes/pizza.png" class="img-fluid" style="height: 6rem;"><br>
                    <h3>"Disfruta de la mejor masa artesanal y la mejor mozarella arequipeña."</h3>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="row">
                    <div class="col-12">
                        <h2>Contáctanos</h2>
                        <ul class="list-group">
                            <li class="list-group-item"><a href="https://www.facebook.com/nonnas.pizzas"
                                    target="_blank">Facebook</a></li>
                            <li class="list-group-item"><a href="https://wa.me/51970481555" target="_blank">Chatea por
                                    WhatsApp</a></li>
                            <li class="list-group-item"><a href="tel:+5117932164">Llámanos al (01) 793-2164</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="col-12">
                    <h2>Ubícanos</h2>
                    <ul class="list-group">
                        <li class="list-group-item">
                            <a href="https://www.google.com/maps/dir/-12.0515179,-77.0219014/Nonna's+Pizza,+Avenida+Los+Olivos,+San+Mart%C3%ADn+de+Porres/@-12.0181663,-77.095315,15010m/data=!3m2!1e3!4b1!4m9!4m8!1m1!4e1!1m5!1m1!1s0x9105cfead9755243:0xb45b0ebb1c30ada0!2m2!1d-77.0891612!2d-11.986492?entry=ttu"
                                target="_blank">San Martin de Porres</a>
                        </li>
                        <li class="list-group-item">
                            <a href="https://www.google.com/maps?q=-12.0515179,-77.0219014" target="_blank">Los
                                Olivos</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>